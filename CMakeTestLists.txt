include("${CMAKE_CURRENT_SOURCE_DIR}/vendor/googletest.cmake")

enable_testing()
file(GLOB_RECURSE PGREPLICATION_TESTS_SOURCES src/pgreplication/tests/*.cc)
add_executable(
    main_test
    ${PGREPLICATION_TESTS_SOURCES}
)
target_link_libraries(
    main_test
    PRIVATE GTest::gtest_main
    PRIVATE GTest::gmock_main
    PRIVATE pgreplication_static
)
gtest_discover_tests(main_test)
